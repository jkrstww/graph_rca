EVENT_IDENTIFY = '''
    你是一个事件信息提取专家。请严格遵循以下指令：
    从给定的变压器故障文本中提取所有关键事件。
    一个“事件”必须包括一个主体（如：变压器、绕组、绝缘油等）及其动作或状态变化。
    如果事件描述中主体缺失，你必须根据上下文语义补全主体。
    输出格式必须严格遵循以下要求：
    如果识别到至少一个事件，请输出：
    <events>
    <event>[事件1]</event>
    <event>[事件2]</event>
    ...
    </events>
    如果未识别到任何事件，请输出：
    <none>
    注意： 
    1. 除上述格式要求的内容外，不要输出任何其他内容，包括思考过程、解释或额外的文字。
    2. 绝对禁止使用 <think> 或任何类似的思考标签
    3. 不要描述你的思考过程
    4. 直接给出最终答案
    5. 如果违反规则，回答将视为无效

    示例如下：
    示例一：
    输入：
    1)局部放电引起绝缘材料中化学键的分离、裂解和分子结构的破坏。
    2)放电点热效应引起绝缘的热裂解或促进氧化裂解，增大了介质的电导和损耗产生恶性循环，加速老化过程。
    3)放电过程生成的臭氧、氮氧化物遇到水分生成硝酸化学反应腐蚀绝缘体，导致绝缘性能劣化。
    4)放电过程的高能辐射，使绝缘材料变脆。
    5)放电时产生的高压气体引起绝缘体开裂，并形成新的放电点，
    输出：
    <events>
    <event>局部放电</event>
    <event>绝缘材料中化学键分离</event>
    <event>绝缘材料中化学键裂解</event>
    <event>绝缘材料中分s子结构破坏</event>
    <event>放电过程生成臭氧、氮氧化物</event>
    <event>臭氧、氮氧化物遇到水分生成硝酸</event>
    <event>硝酸化学反应腐蚀绝缘体</event>
    <event>绝缘性能劣化</event>
    <event>放电过程产生高能辐射</event>
    <event>绝缘材料变脆</event>
    <event>放电时产生高压气体</event>
    <event>绝缘体开裂</event>
    <event>形成新的放电点</event>
    </events>

    示例二：
    输入：
    变压器发生火花放电故障的主要原因是油中杂质的影响。杂质由水分、纤维质(主要是受潮的纤维)等构成。水的介电常数e约为变压器油的40倍，在电场中，杂质首先极化，被吸引向电场强度最强的地方，即电极附近，并按电力线方向排列。于是在电极附近形成了杂质“小桥”，
    输出：
    <events>
    <event>变压器发生火花放电故障</event>
    <event>油中出现杂质</event>
    <event>在电场中杂质极化</event>
    <event>电极附近形成了杂质“小桥”</event>
    <event>杂质被吸引向电场强度最强的地方电极</event>
    <event>杂质按电力线方向排列</event>
    </events>

    请现在处理以下文本：{input}
'''

CHOICE_GENERATE = '''
    <|im_start|>system
    你是一个严格的JSON输出引擎。请只输出有效的JSON格式内容，不包含任何其他文本。
    <|im_end|>
    <|im_start|>user
    你是变压器故障诊断领域的专家，现在你要帮助用户对变压器故障根本原因进行分析。
    具体而言，你需要根据用户提供的当前变压器故障推理路径reason_path，以及故障候选节点（即接下来可能到达的节点）candidate_nodes提出假设，
    这些假设要求必须是和故障推理路径中的节点相关的，能够帮助判断接下来的故障候选节点的问题，请至少提出三个假设。**假设必须是陈述句格式**
    用户将会回答这些假设，用户的回答能够帮助模型确定接下来的节点。
    推理路径的格式如下：
    自身巨大损失<-灾难性故障<-事故扩大<-变压器着火<-变压器内部故障<-相间短路<-事故蔓延扩大
    候选节点格式：
    ['电弧及熔化粒子飞溅','绝缘性能下降']
    输出的格式为:
    [
        {{
            "id":1,
            "question":"假设1"
        }}
    ]

    示例如下：
    输入：
    ['电弧及熔化粒子飞溅','绝缘性能下降']
    输出：
    [
        {{
            "id":1,
            "question":"变压器温度上升"
        }},
        {{
            "id":2,
            "question":"变压器表层老化"
        }},
        {{
            "id":3,
            "question":"变压器使用时间过长"
        }},
    ]
    现在给定推理路径{reason_path}以及故障候选节点{candidate_nodes}。直接以json格式进行输出，不要包含任何思考过程，也不要包含任何其他内容。
    <|im_end|>
'''

NEXT_DECIDE = '''
    你是变压器故障诊断领域的专家，现在你要帮助用户对变压器故障根本原因进行分析。
    具体而言，你需要根据用户提供的当前变压器故障推理路径reason_path，以及故障候选节点（即接下来可能到达的节点）candidate_nodes，以及用户提供的额外信息information从故障候选节点中选择一个节点。
    请参照以下流程进行操作：
    1.阅读并理解变压器推理路径reason_path，理解其中的因果联系。
    2.深入理解用户提供的额外信息，这些信息对于确定下一步的故障节点至关重要。
    3.结合以上信息，从故障候选节点中选择可能性最高的节点进行输出。
    现在给定推理路径{reason_path}，
    额外信息{information}，
    故障候选节点{candidate_nodes}。
    请直接输出选中的节点的名称，不要输出包括思考过程在内的任何其他内容。
'''

FINAL_ANALYSE = '''
    你是变压器故障诊断领域的专家，现在你要帮助用户对变压器故障根本原因进行分析。
    下面的是变压器故障分析的因果逻辑推理链，符号'<-'代表因果关系，‘a<-b'代表事件a的起因是事件b。
    你需要根据这样的因果推理链一步一步地进行分析，结合你自身的知识，对变压器故障的成因进行分析，并给出根本原因。
    因果推理链如下：{reason_paths}
'''

SEARCH_REFERENCE = '''
你作为变压器故障诊断领域的专家，需要根据用户查询（user_query）和提供的参考文献列表（reference_list），筛选出对用户查询有直接帮助或相关性的文献。你的输出必须严格遵循以下要求：
- 仅返回一个列表，包含从reference_list中选出的参考文献文件名（字符串形式）。
- 列表内容应基于文献标题与用户查询的相关性进行判断，优先选择主题高度匹配的文献。
- 输出中不得包含任何额外解释、注释或其他文本。

示例说明：
示例一：
输入：
user_query = "变压器故障"
reference_list = [
    "变压器故障分析中气相色谱技术的运用.docx",
    "配电变压器故障的原因总结.docx",
    "变压器常见故障及处理.docx",
    "变压器故障的诊断.docx",
    "由保险器熔断看变压器故障.docx",
    "浅谈变压器故障的分析处理及预防措施.docx"
]
输出：
["变压器常见故障及处理.docx", "变压器故障的诊断.docx"]

示例二：
输入：
user_query = "保险器损坏"
reference_list = [
    "变压器故障分析中气相色谱技术的运用.docx",
    "配电变压器故障的原因总结.docx",
    "变压器常见故障及处理.docx",
    "变压器故障的诊断.docx",
    "由保险器熔断看变压器故障.docx",
    "浅谈变压器故障的分析处理及预防措施.docx"
]
输出：
["由保险器熔断看变压器故障.docx"]

现在，请根据以下输入进行处理：
user_query: {user_query}
reference_list: {reference_list}

直接输出参考文献列表，无需任何其他内容。
'''